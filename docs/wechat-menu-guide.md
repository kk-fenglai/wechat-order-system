# 微信公众号自定义菜单配置指南

## 📱 菜单功能概述

这个自定义菜单将为你的微信公众号添加以下功能按钮：

### 🎯 主要功能

#### 1. 📦 订单管理
- **📋 我的订单** - 查看用户的所有订单
- **➕ 创建订单** - 创建新的订单
- **🔍 订单查询** - 搜索和查询订单

#### 2. 💰 支付服务
- **💳 在线支付** - 进行订单支付
- **📊 支付记录** - 查看支付历史

#### 3. ℹ️ 帮助中心
- **📞 联系客服** - 点击事件，可配置自动回复
- **❓ 使用说明** - 点击事件，可配置自动回复
- **📖 服务条款** - 查看服务条款页面

## 🔧 配置步骤

### 1. 本地测试菜单配置

```bash
# 运行菜单配置工具
setup-wechat-menu.bat

# 或者直接使用Node.js
node create-wechat-menu.js create
```

### 2. 部署到Render后的配置

部署完成后，需要更新菜单中的URL地址：

1. **获取你的应用URL**：`https://your-app-name.onrender.com`
2. **更新菜单配置**中的URL地址
3. **重新创建菜单**

### 3. 菜单配置示例

```javascript
{
  "button": [
    {
      "name": "📦 订单管理",
      "sub_button": [
        {
          "type": "view",
          "name": "📋 我的订单",
          "url": "https://your-app-name.onrender.com/orders"
        },
        {
          "type": "view",
          "name": "➕ 创建订单",
          "url": "https://your-app-name.onrender.com/create-order"
        },
        {
          "type": "view",
          "name": "🔍 订单查询",
          "url": "https://your-app-name.onrender.com/search-order"
        }
      ]
    }
  ]
}
```

## 📋 菜单类型说明

### 1. view类型（网页链接）
- 用户点击后跳转到指定网页
- 适用于：订单管理、支付页面等

### 2. click类型（点击事件）
- 用户点击后触发事件
- 需要在服务器端处理事件回复
- 适用于：客服联系、帮助说明等

## 🚀 使用流程

### 步骤1：本地测试
1. 确保微信配置正确
2. 运行 `setup-wechat-menu.bat`
3. 选择"创建自定义菜单"
4. 检查是否成功

### 步骤2：Render部署
1. 完成Render部署
2. 获取应用URL
3. 更新菜单配置中的URL
4. 重新创建菜单

### 步骤3：微信公众平台配置
1. 登录微信公众平台
2. 进入"自定义菜单"页面
3. 确认菜单显示正确
4. 测试各功能按钮

## 🔧 自定义修改

### 修改菜单内容
编辑 `create-wechat-menu.js` 文件中的 `menuConfig` 对象：

```javascript
const menuConfig = {
  button: [
    {
      name: "你的菜单名称",
      sub_button: [
        {
          type: "view",
          name: "按钮名称",
          url: "https://your-url.com"
        }
      ]
    }
  ]
};
```

### 添加新功能
1. 在 `menuConfig` 中添加新的按钮配置
2. 确保对应的页面路由已实现
3. 重新创建菜单

## 📱 用户界面预览

用户打开你的微信公众号后，会看到：

```
┌─────────────────────────────────┐
│          你的公众号名称           │
├─────────────────────────────────┤
│  📦 订单管理  │ 💰 支付服务  │ ℹ️ 帮助中心 │
├─────────────────────────────────┤
│  📋 我的订单  │ 💳 在线支付  │ 📞 联系客服 │
│  ➕ 创建订单  │ 📊 支付记录  │ ❓ 使用说明 │
│  🔍 订单查询  │              │ 📖 服务条款 │
└─────────────────────────────────┘
```

## ⚠️ 注意事项

1. **URL地址**：确保所有URL都是HTTPS协议
2. **域名验证**：微信要求域名必须通过ICP备案
3. **菜单限制**：最多3个主菜单，每个主菜单最多5个子菜单
4. **字符限制**：菜单名称不超过16个字符
5. **更新频率**：菜单更新可能需要几分钟生效

## 🔧 故障排除

### 菜单创建失败
1. 检查Access Token是否有效
2. 确认AppID和AppSecret正确
3. 检查网络连接
4. 查看错误信息

### 菜单不显示
1. 确认菜单创建成功
2. 等待几分钟让菜单生效
3. 检查微信公众号设置
4. 清除微信缓存重新进入

### 链接无法访问
1. 确认应用已部署并运行
2. 检查URL地址是否正确
3. 确认域名已备案
4. 测试链接是否可访问

---

完成以上配置后，用户就可以通过微信公众号的菜单按钮直接使用你的订单管理功能了！ 